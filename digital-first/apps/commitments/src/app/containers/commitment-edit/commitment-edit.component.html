<div class="app-page">

  <section>
    <h2 #review *ngIf="commitment$ | async" class="reader-card-article__title" mdcHeadline5>Review</h2>
    <digital-first-commitment-card [commitment]="commitment$ | async" [config]="{disabled:true}"></digital-first-commitment-card>

    <div class="page_title">
      <div #discussion *ngIf="commitment$ | async" class="reader-card-article__title  page_title_text" mdcHeadline5>Discussion</div>
      <a mdcIcon aria-label="Date Format" title="Date Format" *ngIf="timeFormat=='dateFormat'" (click)="changeDateFormat('calendar')">date_range</a>
      <a mdcIcon aria-label="Date Format" title="Date Format" *ngIf="timeFormat=='timeAgo'" (click)="changeDateFormat('dateFormat')">schedule</a>
      <a mdcIcon aria-label="Date Format" title="Date Format" *ngIf="timeFormat=='calendar'" (click)="changeDateFormat('timeAgo')">calendar_today</a>
    </div>
    <digital-first-discussion *ngIf="commitment$ | async" [comments]="(commitment$ | async)?.discussion" [hostId]="(commitment$ | async).id"
      [activeComment]="activeComment" [timeFormat]="timeFormat" (onDeleteComment)="handleDeleteComment($event)"
      (onReplyToComment)="handleReplyToComment($event)" (onAddComment)="handleAddComment($event)"></digital-first-discussion>

    <h2 #edit *ngIf="commitment$ | async" class="reader-card-article__title" mdcHeadline5>Edit</h2>
    <h2 #create *ngIf="!(commitment$ | async)" class="reader-card-article__title" mdcHeadline5>Create</h2>
    <digital-first-commitment-edit-form [commitment]="commitment$ | async" [parties]="parties$ | async" [announcementTypes]="announcementTypes$ | async"
      [portfolios]="portfolios$ | async" [locations]="locations$ | async" (onSubmitted)="handleUpdateCommitment($event)"
      (onCancelled)="handleCancelled($event)" (onChanged)="handleChanged($event)">
    </digital-first-commitment-edit-form>

  </section>

</div>