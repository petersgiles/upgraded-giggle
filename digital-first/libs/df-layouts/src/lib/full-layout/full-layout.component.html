<mdc-top-app-bar class="app-top-app-bar" #topAppBar fixed prominent='false'>
    <mdc-top-app-bar-row>
        <mdc-top-app-bar-section align="start" title="{{title}}" >
            <mdc-icon mdcAppBarNavIcon *ngIf="isScreenSmall()" (click)="drawOpenToggleClicked(!drawOpen)">menu</mdc-icon>
            <mdc-icon mdcTopAppBarActionItem [routerLink]="['/']">home</mdc-icon>
        </mdc-top-app-bar-section>
        <mdc-top-app-bar-section align="center"class="protective-marking">
            <span >{{(protectiveMarking$ | async) | uppercase}}</span> 
        </mdc-top-app-bar-section>
        <mdc-top-app-bar-section align="end">
            <!-- <a mdcAppBarActionItem href="https://github.com/trimox/angular-mdc-web" alt="GitHub" target="_blank" rel="noopener noreferrer">
            <mdc-icon>
              <img src="https://trimox.github.io/angular-mdc-web/assets/github-circle-white-transparent.svg" height="24" />
            </mdc-icon>
          </a>  -->
            <span class="app-layout-title-version">{{version}}</span>
            <digital-first-avatar [name]="profile?.name" [email]="profile?.email" [displayType]="profile?.displayType"
                [size]="profile?.size" [background]="profile?.background">
            </digital-first-avatar>
            <mdc-icon mdcTopAppBarActionItem (click)="profileMenu.open = !profileMenu.open">more_vert</mdc-icon>
            <div mdcMenuSurfaceAnchor #menuAnchor>
                <mdc-menu #profileMenu [anchorElement]="menuAnchor">
                  <mdc-list>
                    <mdc-list-item *ngFor="let item of sidebarItems$ | async">
                        <a *ngIf="!item.divider" mdc-list-item [routerLink]="item.routerLink" routerLinkActive="app-drawer-link-active">
                            <mdc-icon mdcListItemGraphic>{{item.icon}}</mdc-icon>{{item.caption}}
                        </a>
                    </mdc-list-item>
                  </mdc-list>
                </mdc-menu>
            </div>
        </mdc-top-app-bar-section>
    </mdc-top-app-bar-row>
    <mdc-linear-progress [open]="(open$ | async)"></mdc-linear-progress>
</mdc-top-app-bar>


<mdc-drawer #appdrawer="mdcDrawer" [open]="drawOpen || !isScreenSmall()" [drawer]="isScreenSmall() ? 'modal' : 'dismissible'" (opened)="handleOpened($event)" (closed)="handleClosed($event)" mdcTopAppBarFixedAdjust>
    <mdc-drawer-content>
        <mdc-list *ngFor="let item of sidebarItems$ | async" >
            <a *ngIf="!item.divider" mdc-list-item [routerLink]="item.routerLink" routerLinkActive="app-drawer-link-active">
                <mdc-icon mdcListItemGraphic>{{item.icon}}</mdc-icon>{{item.caption}}
            </a>
            <mdc-list-divider *ngIf="item.divider"></mdc-list-divider>
        </mdc-list>
    </mdc-drawer-content>

</mdc-drawer>
<div mdcDrawerAppContent mdcTopAppBarFixedAdjust>
    <router-outlet></router-outlet>
</div>