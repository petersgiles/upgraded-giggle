<mdc-list dense>
  <mdc-list-item class="refiner-bar">
    <button mdc-button dense (click)="onClear.emit()">
      <mdc-icon>clear</mdc-icon>Clear All
    </button>
  </mdc-list-item>
  <mdc-list-item class="search-item">
    <form [formGroup]="textRefinerForm" id="textRefinerForm">
      <mdc-text-field
        label="Text Filter"
        fullwidth
        autocomplete="off"
        autocorrect="off"
        autocapitalize="off"
        spellcheck="off"
        type="text"
        #search
        [formControl]="searchControl"
      >
        <mdc-icon
          mdcTextFieldIcon
          trailing
          clickable="true"
          (click)="handleOnClear()"
          >clear</mdc-icon
        >
      </mdc-text-field>
    </form>
  </mdc-list-item>

  <ng-container *ngFor="let group of refinerGroups">
    <ng-container *ngIf="!group.hidden">
      <mdc-list-item
        class="digital-first-list-heading"
        (click)="group.expanded = !group.expanded"
      >
        {{ group.title }}
        <mdc-icon mdcListItemMeta
          >keyboard_arrow_{{ group.expanded ? 'down' : 'right' }}</mdc-icon
        >
      </mdc-list-item>
      <div *ngIf="group.expanded && group.children">
        <ng-container
          *ngFor="
            let refiner of group.children;
            let i = index;
            trackBy: trackRefiner
          "
        >
          <ng-container
            *ngIf="!group.enableSlide || (group.enableSlide && i <= slideOutLimt)"
          >
            <mdc-list-item
              class="refiner"
              (click)="onRefinerSelected.emit(refiner)"
            >
              <mdc-icon
                >check_box{{
                  refiner.selected ? '' : '_outline_blank'
                }}</mdc-icon
              >

              {{ refiner.title | truncate: [35, '...'] }}
              <span mdcListItemMeta class="refiner-metadata">{{
                refiner.count
              }}</span>
            </mdc-list-item>
          </ng-container>
          <mdc-list-item
            *ngIf="group.enableSlide && i === slideOutLimt"
            class="refiner"
            (click)="onSlideOutGroupSelected.emit(group)"
          >
            <strong style="width:100%;text-align: center"
              >More options ...</strong
            >
          </mdc-list-item>
        </ng-container>
      </div>
      <div *ngIf="group.expanded && group.custom">
        <mdc-list-item (click)="onSaveRefiner.emit()">
          Save Current Filter<mdc-icon mdcListItemMeta>add</mdc-icon>
        </mdc-list-item>
      </div></ng-container
    >
  </ng-container>
</mdc-list>
